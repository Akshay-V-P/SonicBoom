<style>
    .my-swal-border {
		border: 1px solid #404044 !important;
		/* Change color and thickness */
		border-radius: 15px !important;
	}
</style>


<input type="text" id="focusIndicator" value="account" hidden>
<input type="text" id="message" value="{{message}}" placeholder="{{icon}}" hidden>
                <!-- Content Area -->
                <div class="flex-1 flex flex-col gap-8">
                    
                    <!-- Account Details Card -->
                    <section class="bg-card-bg border border-border-color rounded-xl p-6 md:p-8">
                        <h2 class="text-2xl font-bold mb-6">Account Details</h2>
                        {{#if user}}
                        <div class="flex flex-col md:flex-row gap-8">
                            <div class="w-full md:w-2/5 flex flex-col items-center gap-4">
                                <img src="{{user.profilePhoto}}" alt="Profile Picture" class="w-32 h-32 rounded-full object-cover border-2 border-border-color" onerror="this.onerror=null;this.src='https://res.cloudinary.com/dnmpesolv/image/upload/v1755940464/profile-placeholder_fnbhjm.png';">
                            </div>
                        
                            <input type="text" value="{{user.name}}" hidden>
                            <form class="w-full md:w-3/5 space-y-4">
                                <div>
                                    <label for="first-name" class="block text-sm font-medium text-text-medium mb-2">Name</label>
                                    <input type="text" id="name" class="w-full bg-input-bg border border-border-color rounded-lg p-3  outline-none" value="{{user.name}}" readonly>
                                </div>
                                <div>
                                    <label for="phone" class="block text-sm font-medium text-text-medium mb-2">Phone</label>
                                    <input type="tel" id="phone" placeholder="Mobile" class="w-full bg-input-bg border border-border-color rounded-lg p-3 outline-none" value="{{user.mobile}}" readonly>
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-text-medium mb-2">Email</label>
                                    <input type="email" id="email" class="w-full bg-input-bg border border-border-color rounded-lg p-3 outline-none" value="{{user.email}}" readonly>
                                </div>
                                <a href="/account/{{user._id}}" class="bg-primary-blue hover:bg-primary-blue-hover text-white font-semibold py-3 px-6 rounded-lg transition-colors inline-block text-center">Edit</a>
                            </form>
                        </div>
                    </section>

                    <!-- Referral Card -->
                    <section class="bg-card-bg border border-border-color rounded-xl p-6 md:p-8">
                        <h2 class="text-xl font-bold mb-4">You get ₹200, Your friend ₹200. Win-win.</h2>
                        <ol class="list-decimal list-inside text-text-medium space-y-2 mb-6">
                            <li>Share your unique referral code with your friends.</li>
                            <li>When they use that code they will get ₹200 in there wallet.</li>
                            <li>You will get ₹200 in your wallet.</li>
                        </ol>
                        <div class="flex flex-wrap gap-2">
                            <input type="text" class=" bg-dark border border-border-color rounded-lg p-3" value="U34J0H84" id="referal-code" readonly>
                            <button class="bg-primary-blue hover:bg-primary-blue-hover text-white font-semibold py-3 px-6 rounded-lg transition-colors" id="copy-btn">Copy</button>
                        </div>
                    </section>
                    <button type="submit" id="logout" class="self-start bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">Logout</button>
                {{/if}}
                </div>

                <!-- Simple Snackbar for alerts -->
<div id="snackbar"
    class="fixed bottom-4 left-1/2 -translate-x-1/2 py-3 px-6 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 z-50"
    style="z-index: 9999;"></div>

<script>
    document.addEventListener("DOMContentLoaded", ()=>{
        document.getElementById('logout').addEventListener('click', ()=>{
            Swal.fire({
                title: "Are you sure?",
                text: "Do you want to logout from SonicBoom",
                icon: "info",
                showCancelButton: true,
                confirmButtonColor: "#d33",
                cancelButtonColor: "#4B4DFF",
                confirmButtonText: "Yes",
                cancelButtonText: "No",
                background: "#242428",
                customClass: {
                    popup: 'my-swal-border'
                }
                }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/logout'
                }

            });
        })

        let msgValue = document.getElementById('message').value
        let icon = document.getElementById('message').getAttribute('placeholder')
        if (msgValue) {
            Swal.fire({
                title: msgValue,
                icon: icon,
                background: "#242428",
                color: 'white',
                customClass: {
                    popup: 'my-swal-border'
                }
            });
        }

        // Function to show a temporary snackbar message
    function showSnackbar(message, colorClass) {
        const snackbar = document.getElementById('snackbar');
        snackbar.textContent = message;
        snackbar.className = `fixed bottom-4 left-1/2 -translate-x-1/2 py-3 px-6 rounded-lg shadow-lg opacity-100 transition-opacity duration-300 z-50 ${colorClass}`;
        setTimeout(() => {
            snackbar.classList.remove('opacity-100');
            snackbar.classList.add('opacity-0');
        }, 3000);
    }



        const copyBtn = document.getElementById('copy-btn');
    const referalInput = document.getElementById('referal-code');

    copyBtn.addEventListener('click', () => {
    // Select the text
    referalInput.select();
    referalInput.setSelectionRange(0, 99999); // For mobile devices

    // Copy text to clipboard
    navigator.clipboard.writeText(referalInput.value)
        .then(() => {
            showSnackbar("Copied", "bg-zinc-500")
        })
        .catch(err => {
            console.error("Failed to copy: ", err);
        });
});
    })



</script>